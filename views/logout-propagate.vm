##
## Velocity Template for logout flow's concluding view-state (with propagation)
##
## Velocity context will contain the following properties
## flowExecutionUrl - the form action location
## flowRequestContext - the Spring Web Flow RequestContext
## flowExecutionKey - the SWF execution key (this is built into the flowExecutionUrl)
## profileRequestContext - root of context tree
## logoutContext - context with SPSession details for logout operation
## multiRPContext - context with RelyingPartyContexts and possibly SP UI information from the metadata
## htmlEncoder - HTMLEncoder class
## urlEncoder - urlEncoder class
## codecUtil - CodecUtil class
## request - HttpServletRequest
## response - HttpServletResponse
## environment - Spring Environment object for property resolution
## custom - arbitrary object injected by deployer
##
#set ($hidden = $environment.getProperty("idp.logout.propagationHidden", "false"))

#parse ("header.vm")

<main class="d-flex flex-md-row flex-column container-fluid justify-content-center" style="margin-top: 64px" id="content">

    <div class="d-flex flex-column col-lg-4 mt-5">
        <div class="card">
            <div class="card-body">

                #if($hidden == "true")
                <p>#springMessageText("idp.logout.hidden", "Your single sign-on session has been terminated, but you are still logged into many of the services you have accessed during your session.")</p>
                #else
                <h4 class="card-title">#springMessageText("idp.logout.attempt", "Attempting to log out of the following services:")</h4>
                #end
                #parse("logout/propagate.vm")
            </div>
        </div>
    </div>

</main>

#parse ("footer.vm")